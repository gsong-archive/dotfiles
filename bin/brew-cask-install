#!/bin/bash

set -e

# Manually remove the brew cache, since that is the only way to force
# `brew cask install` to grab the latest versions of its recipes.
# https://github.com/caskroom/homebrew-cask/issues/309#issuecomment-32470815
# Let's just delete apps without a specific version, rather than everything!
mkdir -p "$(brew --cache)"
find "$(brew --cache)" -name "*latest*" -print0 | xargs -0 rm

brew install caskroom/cask/brew-cask
brew update

## Quick Look plugins
caffeinate brew cask install --force qlcolorcode qlmarkdown qlprettypatch \
  qlstephen quicklook-csv quicklook-json webpquicklook
qlmanage -r

## OS X apps
caffeinate brew cask install --force easysimbl etrecheck fluid flux \
  handbrake keyboardcleantool namebench nvalt onyx pgadmin3 private-eye \
  virtualbox

## OS X preference panes
caffeinate brew cask install --force functionflip rcdefaultapp secrets

## Java
caffeinate brew cask install --force java
